<html lang="ru">
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://fluidsync-8f7e4.firebaseapp.com/fluidsync_ws.js"></script>

    <script>
               
        function print(s)
        {
            $('body').append('<p>' + s + '</p>');       
        }

        //---------------------------------------------------
        
        $(() => {

            function onOpen(fluidsync)
            {
                console.log('connected: ' + fluidsync.id);

                fluidsync.addEventListener('mychannel', (fluidsync, message) => {
                    console.log('message on ['  + fluidsync.id + ']');
                    console.log(message);     
                });
                
                fluidsync.subscribe('mychannel');
            }

            function onClose(fluidsync, code, reason)
            {
                console.log('closed [' + fluidsync.id + ']: code=' + code + ', reason=' + reason);
            }

            function onError(fluidsync)
            {
                console.log('error ['  + fluidsync.id + ']');
            }

            function onPong(fluidsync)
            {
                console.log('pong on ['  + fluidsync.id + ']');                
            }
            
            let fsc = new FluidSyncClient({                
                onOpen: onOpen,
                onClose: onClose,
                onError: onError,
                onPong
            });
        });
        
    </script>
<body> 
</body>
</html>
